---
title: Installing and Upgrading Redis for PCF
owner: London Services
---

## <a id="install"></a>Installation Steps

To add Redis for PCF to Ops Manager, follow the procedure for adding Pivotal Ops Manager tiles:

1. Download the product file from [Pivotal Network](https://network.pivotal.io/products/p-redis).
1. Upload the product file to your Ops Manager installation.
1. Click **Add** next to the uploaded product description in the Available Products view to add this product to your staging area.
1. (Optional) Click the newly added tile to configure your [possible service plans](#configuration), [syslog draining](#syslog), and [backups](#backups).
1. Click **Apply Changes** to install the service.

## <a id="configuration"></a>Configuring PCF Redis

###  <a id="service-plans"></a>Configure Redis Service Plans
 
Select the **Redis** tile from the Installation Dashboard to display the configuration page and allocate resources to Redis service plans.

####  <a id="shared-vm-config"></a>Shared-VM Plan 

1.  Select the **Shared-VM Plan** tab to configure the memory limit for each Redis instance and the maximum number of instances that can be created.
![shared vm config](shared-vm-config.png)

1.  Enter the maximum number of instances and the memory limit for each Redis instance.

1.  Click the **Save** button.

    <br />Shared-VM instances run on the Redis Broker.

    <br />The memory and instance limits for your Shared-VM Redis instances should depend on the total memory of your Redis broker.
    When configuring the maximum number of Redis service instances that can be created you need to take into account the maximum memory each redis instance could use in correlation with how much total memory the Redis broker has.
    We recommend you only allow up to 45% of your Redis broker's total memory to be used by all Redis instances.
    This is due the amount of memory required to support Redis persistence, and run Redis broker & system tasks.

    <br />See below for example cases:

    <table border="1" class="nice">
    	<tr>
    		<th>Redis Broker Total Memory</th>
    		<th>Redis Instance Memory Limit</th>
    		<th>Redis Service Instance Limit</th>
    	</tr>
    	<tr>
    	 	<td>16GB</td>
    	 	<td>512MB</td>
    	 	<td>14</td>
     	</tr>
      <tr>
    	 	<td>16GB</td>
    	 	<td>256MB</td>
    	 	<td>28</td>
     	</tr>
      <tr>
    	 	<td>64GB</td>
    	 	<td>512MB</td>
    	 	<td>56</td>
     	</tr>
    </table>


    <br />It is possible to configure a larger Redis Service Instance Limit, if you are confident that the majority of the deployed instances will not be using a large amount of their allocated memory, for example in development or test environments.
    <p class="note"><strong>Note</strong>:
      This is not supported, and could cause your server to run out of memory.
      If this happens your users may not be able to write any further data to any Redis instance.
    </p>


1.  Select the **Resource Config** tab to change the allocation of resources for the Redis Broker.
    <br />The Redis Broker server will run all of the Redis instances for your Shared-VM plan. From this screen you may increase or decrease the CPU, RAM, Ephemeral Disk & Persistent Disk made available, as required.

1.  Click the **Save** button.

####  <a id="dedicated-vm-config"></a>Dedicated-VM Plan

1.  Select the **Resource Config** tab to change the allocation of resources for the Dedicated Node.
![dedicated vm config](dedicated-vm-config.png)

    <br />By default, 5 dedicated nodes will be created, each capable of running one Redis instance. You can increase or decrease the number of dedicated nodes, the size of the Persistent and Ephemeral Disks, and the CPU and RAM, as required.
The default VM size is small; it is important that the operator set the correct VM size to handle anticipated loads. The maxmemory value for the Redis process is set to be 45% of the RAM for that instance.

1.  Click the **Save** button.


### <a id="syslog"></a>Configure Syslog Output

Pivotal recommends that operators configure a syslog output.

1. Select the **Syslog** tab to setup the details of your syslog draining.

1.  Add the Syslog address, Syslog port and transport protocol of your log management tool.

    ![syslog configuration](syslog-forwarding.png)

1.  Click the **Save** button.

![syslog configuration](syslog-forwarding.png)

